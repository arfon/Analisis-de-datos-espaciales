<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 R: Una introducción desde la exploración de información | Análisis de datos espaciales con R</title>
  <meta name="description" content="2 R: Una introducción desde la exploración de información | Análisis de datos espaciales con R" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="2 R: Una introducción desde la exploración de información | Análisis de datos espaciales con R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 R: Una introducción desde la exploración de información | Análisis de datos espaciales con R" />
  
  
  

<meta name="author" content="Jaime Alberto Prudencio Vázquez" />


<meta name="date" content="2023-01-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="prólogo.html"/>
<link rel="next" href="mapas-coropléticos-en-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Primera Edición</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Análisis de datos espaciales con R</a></li>
<li class="chapter" data-level="1" data-path="prólogo.html"><a href="prólogo.html"><i class="fa fa-check"></i><b>1</b> Prólogo</a></li>
<li class="chapter" data-level="2" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html"><i class="fa fa-check"></i><b>2</b> R: Una introducción desde la exploración de información</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#r-lenguaje-de-programación-y-plataforma-de-análisis"><i class="fa fa-check"></i><b>2.1</b> R: Lenguaje de programación y plataforma de análisis</a></li>
<li class="chapter" data-level="2.2" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#códigos-objetos-paquetes"><i class="fa fa-check"></i><b>2.2</b> Códigos, objetos, paquetes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#código"><i class="fa fa-check"></i><b>2.2.1</b> Código</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#objetos-operadores-y-tipos-de-variables"><i class="fa fa-check"></i><b>2.2.2</b> Objetos, operadores y tipos de variables</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#paquetes"><i class="fa fa-check"></i><b>2.2.3</b> Paquetes</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#solicitar-ayuda-de-un-paquete-o-función-de-r"><i class="fa fa-check"></i><b>2.2.4</b> Solicitar ayuda de un paquete o función de R</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-bases-de-datos"><i class="fa fa-check"></i><b>2.3</b> Cargar bases de datos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-un-archivo-de-excel-xls-xslx"><i class="fa fa-check"></i><b>2.3.1</b> Cargar un archivo de Excel (xls, xslx)</a></li>
<li class="chapter" data-level="2.3.2" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-archivos-separados-por-comas-csv"><i class="fa fa-check"></i><b>2.3.2</b> Cargar archivos separados por comas (csv)</a></li>
<li class="chapter" data-level="2.3.3" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-bases-con-la-funcionalidad-importar"><i class="fa fa-check"></i><b>2.3.3</b> Cargar bases con la funcionalidad importar</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#exploración-inicial-a-través-de-gráficos"><i class="fa fa-check"></i><b>2.4</b> Exploración inicial a través de gráficos</a></li>
<li class="chapter" data-level="2.5" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#manipulación-de-la-información"><i class="fa fa-check"></i><b>2.5</b> Manipulación de la información</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#seleccionar-variables"><i class="fa fa-check"></i><b>2.5.1</b> Seleccionar variables</a></li>
<li class="chapter" data-level="2.5.2" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#filtrar-seleccionar-casos"><i class="fa fa-check"></i><b>2.5.2</b> Filtrar (seleccionar casos)</a></li>
<li class="chapter" data-level="2.5.3" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#ordenar"><i class="fa fa-check"></i><b>2.5.3</b> Ordenar</a></li>
<li class="chapter" data-level="2.5.4" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#crear-nuevas-variables"><i class="fa fa-check"></i><b>2.5.4</b> Crear nuevas variables</a></li>
<li class="chapter" data-level="2.5.5" data-path="r-una-introducción-desde-la-exploración-de-información.html"><a href="r-una-introducción-desde-la-exploración-de-información.html#resúmenes-de-información-y-grupos"><i class="fa fa-check"></i><b>2.5.5</b> Resúmenes de información y grupos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html"><i class="fa fa-check"></i><b>3</b> Mapas coropléticos en R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#datos-y-datos-espaciales"><i class="fa fa-check"></i><b>3.1</b> Datos y datos espaciales</a></li>
<li class="chapter" data-level="3.2" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#los-paquetes"><i class="fa fa-check"></i><b>3.2</b> Los paquetes</a></li>
<li class="chapter" data-level="3.3" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#carga-de-la-base-de-datos-geográfica"><i class="fa fa-check"></i><b>3.3</b> Carga de la base de datos geográfica</a></li>
<li class="chapter" data-level="3.4" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#mapas-coropléticos-básicos"><i class="fa fa-check"></i><b>3.4</b> Mapas coropléticos básicos</a></li>
<li class="chapter" data-level="3.5" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#personalización"><i class="fa fa-check"></i><b>3.5</b> Personalización</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#argumentos-de-personalización-dentro-de-la-función-de-relleno"><i class="fa fa-check"></i><b>3.5.1</b> Argumentos de personalización dentro de la función de relleno</a></li>
<li class="chapter" data-level="3.5.2" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#argumentos-de-personalización-del-borde"><i class="fa fa-check"></i><b>3.5.2</b> Argumentos de personalización del borde</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#función-para-elementos-de-diseño-de-salida-tm_layout"><i class="fa fa-check"></i><b>3.6</b> Función para elementos de diseño de salida, <code>tm_layout()</code></a></li>
<li class="chapter" data-level="3.7" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#mapa-base-interactivo"><i class="fa fa-check"></i><b>3.7</b> Mapa base interactivo</a></li>
<li class="chapter" data-level="3.8" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#cartograma"><i class="fa fa-check"></i><b>3.8</b> Cartograma</a></li>
<li class="chapter" data-level="3.9" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#centroides-o-coordenadas-geométricas-punto-medio"><i class="fa fa-check"></i><b>3.9</b> Centroides o coordenadas geométricas (punto medio)</a></li>
<li class="chapter" data-level="3.10" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#tópico-adicional-mapas-de-clasificación-especial-elementos-de-programación"><i class="fa fa-check"></i><b>3.10</b> Tópico adicional: Mapas de clasificación especial (elementos de programación)</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#una-palabra-de-advertencia"><i class="fa fa-check"></i><b>3.10.1</b> Una palabra de advertencia</a></li>
<li class="chapter" data-level="3.10.2" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#mapa-de-intervalos-personalizados"><i class="fa fa-check"></i><b>3.10.2</b> Mapa de intervalos personalizados</a></li>
<li class="chapter" data-level="3.10.3" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#mapas-de-valores-extremos"><i class="fa fa-check"></i><b>3.10.3</b> Mapas de valores extremos</a></li>
<li class="chapter" data-level="3.10.4" data-path="mapas-coropléticos-en-r.html"><a href="mapas-coropléticos-en-r.html#construcción-de-una-función-personalizada-para-hacer-mapas-de-percentiles"><i class="fa fa-check"></i><b>3.10.4</b> Construcción de una función personalizada para hacer mapas de percentiles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html"><i class="fa fa-check"></i><b>4</b> Análisis espacial I: autocorrelación</a>
<ul>
<li class="chapter" data-level="4.1" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#autocorrelación-espacial-y-definición-de-vecindad"><i class="fa fa-check"></i><b>4.1</b> Autocorrelación espacial y definición de vecindad</a></li>
<li class="chapter" data-level="4.2" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#matrices-de-pesos-espaciales-en-r"><i class="fa fa-check"></i><b>4.2</b> Matrices de pesos espaciales en R</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#construcción-de-matrices-con-spdep"><i class="fa fa-check"></i><b>4.2.1</b> Construcción de matrices con <code>spdep</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#construcción-de-matrices-con-rgeoda"><i class="fa fa-check"></i><b>4.2.2</b> Construcción de matrices con <code>rgeoda</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#variables-espacialmente-rezagadas"><i class="fa fa-check"></i><b>4.3</b> Variables espacialmente rezagadas</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#rezagos-espaciales-con-spdep"><i class="fa fa-check"></i><b>4.3.1</b> Rezagos espaciales con <code>spdep</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#rezagos-espaciales-con-rgeoda"><i class="fa fa-check"></i><b>4.3.2</b> Rezagos espaciales con <code>rgeoda</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#coeficiente-de-correlación-espacial-la-i-de-moran"><i class="fa fa-check"></i><b>4.4</b> Coeficiente de correlación espacial: la I de Moran</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#diagrama-de-moran"><i class="fa fa-check"></i><b>4.4.1</b> Diagrama de Moran</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#múltiples-elementos-de-personalización-de-ésta-y-otras-gráficas-asociadas-al-paquete-base-de-r-pueden-revisarse-en-la-documentación-de-la-función-par."><i class="fa fa-check"></i><b>4.5</b> Múltiples elementos de personalización de ésta y otras gráficas asociadas al paquete base de R pueden revisarse en la documentación de la función <code>par()</code>.</a></li>
<li class="chapter" data-level="4.6" data-path="análisis-espacial-i-autocorrelación.html"><a href="análisis-espacial-i-autocorrelación.html#índice-de-moran-local-y-mapa-de-clusters"><i class="fa fa-check"></i><b>4.6</b> Índice de Moran local y mapa de clusters</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html"><i class="fa fa-check"></i><b>5</b> Modelos de regresión lineal</a>
<ul>
<li class="chapter" data-level="5.1" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#causalidad-y-correlación-el-alcance-del-análisis-de-regresión"><i class="fa fa-check"></i><b>5.1</b> Causalidad y correlación: el alcance del análisis de regresión</a></li>
<li class="chapter" data-level="5.2" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#lo-artesanal-de-la-econometría"><i class="fa fa-check"></i><b>5.2</b> Lo “artesanal” de la econometría</a></li>
<li class="chapter" data-level="5.3" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#qué-buscamos-a-través-de-una-regresión-con-mínimos-cuadrados-ordinarios"><i class="fa fa-check"></i><b>5.3</b> Qué buscamos a través de una regresión (con mínimos cuadrados ordinarios)</a></li>
<li class="chapter" data-level="5.4" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#modelo-de-regresión-lineal-simple"><i class="fa fa-check"></i><b>5.4</b> Modelo de regresión lineal simple</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#supuestos-del-módelo-clásico-de-regresión-lineal"><i class="fa fa-check"></i><b>5.4.1</b> Supuestos del módelo clásico de regresión lineal</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#regresión-lineal-simple-en-r"><i class="fa fa-check"></i><b>5.5</b> Regresión lineal simple en R</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#una-exploración-visual-de-los-errores"><i class="fa fa-check"></i><b>5.5.1</b> Una exploración visual de los errores</a></li>
<li class="chapter" data-level="5.5.2" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#coeficiente-de-determinación"><i class="fa fa-check"></i><b>5.5.2</b> Coeficiente de determinación</a></li>
<li class="chapter" data-level="5.5.3" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#una-aproximación-a-la-predicción"><i class="fa fa-check"></i><b>5.5.3</b> Una aproximación a la predicción</a></li>
<li class="chapter" data-level="5.5.4" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#significancia-individual-de-los-coeficientes-obtenidos"><i class="fa fa-check"></i><b>5.5.4</b> Significancia individual de los coeficientes obtenidos</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#algunos-elementos-de-cuidado-con-las-regresiones-lineales"><i class="fa fa-check"></i><b>5.6</b> Algunos elementos de cuidado con las regresiones lineales</a></li>
<li class="chapter" data-level="5.7" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#regresión-lineal-múltiple-una-propuesta-de-modelo"><i class="fa fa-check"></i><b>5.7</b> Regresión lineal múltiple: una propuesta de modelo</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="modelos-de-regresión-lineal.html"><a href="modelos-de-regresión-lineal.html#significancia-conjunta-de-los-coeficientes-calculados"><i class="fa fa-check"></i><b>5.7.1</b> Significancia conjunta de los coeficientes calculados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html"><i class="fa fa-check"></i><b>6</b> Análisis espacial II: modelos econométricos espaciales</a>
<ul>
<li class="chapter" data-level="6.1" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#econometría-espacial"><i class="fa fa-check"></i><b>6.1</b> Econometría espacial</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#diversas-alternativas-de-modelos-econométricos"><i class="fa fa-check"></i><b>6.1.1</b> Diversas alternativas de modelos econométricos</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#los-modelos-econométricos-de-error-espacial-y-rezago-espacial"><i class="fa fa-check"></i><b>6.2</b> Los modelos econométricos de error espacial y rezago espacial</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#secuencia-general-para-la-estimación"><i class="fa fa-check"></i><b>6.2.1</b> Secuencia general para la estimación</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#modelos-espaciales-en-r-un-ejemplo-para-el-valle-de-méxico"><i class="fa fa-check"></i><b>6.3</b> Modelos espaciales en R: un ejemplo para el Valle de México</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#recapitulación-la-necesidad-de-un-modelo-espacial"><i class="fa fa-check"></i><b>6.3.1</b> Recapitulación: la necesidad de un modelo espacial</a></li>
<li class="chapter" data-level="6.3.2" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#estimación-de-los-modelos-espaciales"><i class="fa fa-check"></i><b>6.3.2</b> Estimación de los modelos espaciales</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="análisis-espacial-ii-modelos-econométricos-espaciales.html"><a href="análisis-espacial-ii-modelos-econométricos-espaciales.html#reflexiones-finales"><i class="fa fa-check"></i><b>6.4</b> Reflexiones finales</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sobre-el-autor.html"><a href="sobre-el-autor.html"><i class="fa fa-check"></i>Sobre el autor</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análisis de datos espaciales con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-una-introducción-desde-la-exploración-de-información" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> R: Una introducción desde la exploración de información<a href="r-una-introducción-desde-la-exploración-de-información.html#r-una-introducción-desde-la-exploración-de-información" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="r-lenguaje-de-programación-y-plataforma-de-análisis" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> R: Lenguaje de programación y plataforma de análisis<a href="r-una-introducción-desde-la-exploración-de-información.html#r-lenguaje-de-programación-y-plataforma-de-análisis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div style="text-align: justify">
<p>R es un lenguaje de programación orientado a objetos, libre y de código abierto y además un ambiente enfocado al análisis estadístico y gráfico. Que sea libre significa, a diferencia de otros programas, que cualquier persona puede usarlo, redistribuirlo o modificarlo, sin necesidad de contar con una licencia pago.</p>
<blockquote>
<p>R es un entorno de software libre para computación estadística y gráficos. Compila y se ejecuta en una amplia variedad de plataformas UNIX, Windows y MacOS. Fuente:  <a href="http://cran.r-project.org">http://cran.r-project.org</a><br />
</p>
</blockquote>
<p>Usar R en lugar de otras plataformas que requieren licencia pago es recomendable al menos por tres razones:</p>
<ol style="list-style-type: lower-roman">
<li>Es libre: en contraste con otros populares programas informáticos como lo es STATA, del que una licencia sencilla ronda los 100 dólares por año.<br />
</li>
<li>R no es sólo un software, también es un lenguaje de programación; así, al aprenderlo se obtiene un resultado doble. De modo que cuando llegues a manejarlo con profundidad, puedes crear tus propias librerías. No sólo sirve para hacer análisis gráfico y estadístico, con el puedes hacer páginas web, ser usado como Sistema de Información Geográfica e incluso para escribir libros, como éste que ahora estas leyendo.</li>
<li>Es un lenguaje con un amplio soporte, es decir, con multitud de guías y materiales para el autoaprendizaje.</li>
</ol>
<p>A lo largo de este libro usaremos R a través de <a href="https://es.wikipedia.org/wiki/RStudio"><em>RStudio</em></a>, un entorno de desarrollo integrado o IDE por sus siglas en inglés. Así que, lo primero será descargar e instalar R y luego descargar e instalar RStudio.</p>
<p>R puede ser descargado de <a href="https://www.r-project.org/">aquí</a>. Al seleccionar <em>“download R”</em> hay que elegir cualquier CRAN Mirror (del inglés <em>Comprehensive R Archive Network</em> que son repositorios que contienen una copia del código base de R y sus paquetes). México tiene dos, puedes elegir cualquiera.</p>
<p>En tanto, RStudio puede ser descargado de <a href="https://www.rstudio.com/">aquí</a>. Ve a la sección <em>“Download”</em> en la parte superior y elije la versión gratuita. El navegador debería seleccionar la versión adecuada para tu equipo, sino es así, selecciona del listado que aparece en la parte inferior. También puedes consultar <a href="https://youtu.be/zlnm1jLWLeE">este video</a> para seguir paso a paso la instalación de ambos programas.</p>
<p>Al abrir RStudio se mostrará una pantalla como la que aparece en la Figura 1.1. La pantalla principal de RStudio está dividida en cuatro partes. En caso de que el recuadro superior izquierdo no aparezca, da clic en el ícono de la hoja en blanco con el signo de más (<em>New file</em>, parte superior izquierda de la pantalla) para que se despliegue.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-2"></span>
<img src="recursos%20intro/Figura_1-Entorno.jpg" alt="Panel principal" width="100%" />
<p class="caption">
Figura 2.1: Panel principal
</p>
</div>
<p>Las citadas cuatro secciones son:</p>
<ul>
<li>Fuente u origen (<em>source</em>): esta sección, zona superior izquierda, aparecerá una vez que des clic en <em>New script</em>. Aquí podrás escribir las líneas de código de tu proyecto y guardarlas para consultarlas cuando lo desees, visualizarás tus bases de datos organizadas en pestañas y varios otros elementos.</li>
<li>Consola: localizada en la parte inferior izquierda, es donde aparece el puntero o <em>prompt</em> (&gt;); este es el espacio en el que se insertarán o escribirán las líneas de código para ser ejecutadas por R y en donde se mostrarán parte de los resultados. Cuando el <em>prompt</em> aparezca, R está listo para recibir tus instrucciones.</li>
<li>Archivo: en el espacio inferior derecho aparecen una serie de pestañas que muestran las carpetas y archivos de tu equipo, las gráficas realizadas y los paquetes disponibles, así como la ayuda de R y de sus paquetes.</li>
<li>Ambiente: por último el área superior derecha, mostrará las variables creadas, bases de datos cargadas y todos los objetos activos en la sesión de R. Esta sección contiene otras dos pestañas: historial y conexiones. La primera ofrece una memoria de todas las instrucciones escritas en la consola, en tanto, la segunda le será útil cuando haga trabajo colaborativo a través de, por ejemplo, GitHub.</li>
</ul>
</div>
<div id="códigos-objetos-paquetes" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Códigos, objetos, paquetes<a href="r-una-introducción-desde-la-exploración-de-información.html#códigos-objetos-paquetes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div style="text-align: justify">
<div id="código" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Código<a href="r-una-introducción-desde-la-exploración-de-información.html#código" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Los programas informáticos están construidos a partir de código, éste puede ser entendido como un lenguaje a partir del cual se dan las instrucciones a la computadora para que realice alguna acción. Como en todo lenguaje, un aspecto sustantivo es la sintaxis y la ortografía, es decir, el orden y la corrección en la forma en que uno se comunica con el sistema de cómputo, de modo que si se escribe alguna instrucción de forma incorrecta o incompleta (faltas de ortografía o errores de sintaxis) la instrucción no se ejecutará.</p>
<p>En este sentido, se debe señalar que R es sensible al uso de mayúsculas y minúsculas, esto quiere decir para nuestro programa no es lo mismo Árbol y árbol. Además, en este programa constantemente estará usando paréntesis y comas en las instrucciones, por lo que hay que poner especial atención para no olvidar colocar alguno de ellos en la sentencia escrita. Otro elemento importante son las llamadas “palabras clave”, <em>Keywords</em>. Éstas son palabras reservadas, es decir, palabras con un significado especial para R y que hacen referencia a instrucciones que pertenecen a la estructura base del programa R por lo que no está recomendado su uso. Algunos ejemplos de palabras reservadas son son: <em>if</em>, <em>else</em>, <em>break</em>. Además, el nombre de las variables no debe comenzar con caracteres especiales (&amp;,#,$,%) o números.</p>
</div>
<div id="objetos-operadores-y-tipos-de-variables" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Objetos, operadores y tipos de variables<a href="r-una-introducción-desde-la-exploración-de-información.html#objetos-operadores-y-tipos-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Si bien R es tremendamente potente, puede incluso utilizarse como simple calculadora. Los operadores matemáticos que pueden emplearse en R se muestran en el cuadro 1.1:</p>
<table>
<caption>Cuadro 1.1</caption>
<thead>
<tr class="header">
<th align="center">Operador</th>
<th align="center">Operación</th>
<th align="center">Ejemplo</th>
<th align="center">Resultado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+</td>
<td align="center">Suma</td>
<td align="center">5+3</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">-</td>
<td align="center">Resta</td>
<td align="center">5-3</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">*</td>
<td align="center">Multiplicación</td>
<td align="center">5*3</td>
<td align="center">15</td>
</tr>
<tr class="even">
<td align="center">/</td>
<td align="center">División</td>
<td align="center">5/3</td>
<td align="center">1.66667</td>
</tr>
<tr class="odd">
<td align="center">^</td>
<td align="center">Potencia</td>
<td align="center">5^3</td>
<td align="center">125</td>
</tr>
<tr class="even">
<td align="center">%%</td>
<td align="center">División entera</td>
<td align="center">5%%3</td>
<td align="center">2</td>
</tr>
</tbody>
</table>
<p>De esta forma si colocas en la consola el número <code>5</code> seguido del signo aritmético correspondiente, por ejemplo un signo de más, <code>+</code>, y luego otro número, R devolverá el resultado de la operación:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">+</span><span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p>En R, todos los elementos con los que se interactúa son denominados objetos (por eso se dice que es un lenguaje de programación orientado a objetos), los hay de distintas clases y cada clase se puede identificar por un nombre. Los objetos más comunes en R son: constantes, variables, vectores, listas, matrices y arreglos de datos (<em>data frames</em>). Estos últimos los hay en diferentes versiones dependiendo de algunas de sus características.</p>
<p>Los objetos pueden contener diferentes tipos de información como: números enteros (<em>integer</em>), valores numéricos (<em>numeric</em>), números complejos (<em>complex</em>) o valores lógicos (<em>logic</em>) y de cadena/texto (<em>character</em>). Distinguir entre los tipos de información que contiene cada objeto es importante para conocer las operaciones que se pueden hacer entre ellos. Por ejemplo, no es posible hacer operaciones matemáticas con variables tipo <em>character</em> ya que no tiene sentido sumar aritméticamente “casa” y “azul”, pero sí es posible concatenarlos.</p>
<p>Para crear objetos, en R se utiliza el signo “menor que” seguido de un guion para formar una suerte de flecha que apunta a la izquierda, <code>&lt;-</code>, éste singo es llamado <strong>operador de asignación</strong> y precisamente asigna contenido a objetos, es decir, con el operador <code>&lt;-</code> creamos un objeto que tendrá determinado contenido. Ve a la sección consola de tu entorno de trabajo e ingresa las siguientes líneas de instrucciones (o simplemente da click en el ícono de copiar que aparece en la esquina superior derecha del cuadro que contiene el código y pégalo en la consola):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Nota: el símbolo de # representa un comentario y no se ejecuta con el código</span></span>
<span id="cb3-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb3-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co">#Numérico</span></span>
<span id="cb3-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb3-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;Hola&quot;</span> <span class="co">#Carácter </span></span>
<span id="cb3-4"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb3-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="cn">FALSE</span> <span class="co"># Lógico</span></span></code></pre></div>
<p>Tras haber escrito estas líneas de código notarás que en la sección superior derecha de RStudio aparecen, en la pestaña de ambiente, los tres objetos creados, cada uno con un nombre y contenido diferente entre ellos: <code>x</code> es un objeto numérico, <code>y</code> es una cadena de texto o carácter y <code>z</code> contiene un valor lógico. Basta con escribir el nombre del objeto en la consola para ver su contenido.</p>
<p>Ahora, vuelve a crear un objeto de nombre <code>x</code> que contenga el resultado de la suma de 5+10:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb4-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">+</span><span class="dv">10</span></span></code></pre></div>
<p>Como es posible identificar, si en una sesión de R se utiliza dos veces el mismo nombre para una variable, se sobrescribe la información asignada a esa variable, es decir, sólo permanece el último valor asignado: <code>x</code> ya no contiene la primera asignación, 3, solamente la última, 15.</p>
<p>Hay dos funciones muy útiles para conocer el tipo de objeto que tenemos en nuestro entorno de trabajo: la función <code>class()</code> y la función <code>str()</code>. La primera indica el tipo de objeto, en tanto, la segunda nos dice el tipo de objeto y su valor. En el siguiente ejemplo puedes ver que el objeto <code>y</code> es de tipo carácter y su contenido es la expresión “Hello World”.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span></code></pre></div>
<pre><code>##  chr &quot;Hola&quot;</code></pre>
<div id="vectores" class="section level4 hasAnchor" number="2.2.2.1">
<h4><span class="header-section-number">2.2.2.1</span> Vectores<a href="r-una-introducción-desde-la-exploración-de-información.html#vectores" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Los vectores son una forma de almacenar más de un elemento en un objeto y dichos elementos no tienen que ser necesariamente del mismo tipo, aunque es importante tener en cuenta que no es recomendable combinar diferentes tipos de objetos porque se pueden alterar las clases de cada uno de los elementos originales. Cuando se quiere crear un vector que contiene cadenas de texto, cada cadena (palabra u oración) se debe poner entre comillas, como se ilustra a continuación:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb9-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;v&quot;</span>)</span>
<span id="cb9-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb9-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;v&quot;</code></pre>
<p>El uso de vectores es útil para modificar las etiquetas de una gráfica o bien los encabezados de una tabla, ya que R tomará los valores de texto almacenados en el vector para utilizarlos en la forma deseada. Aquí se muestran otros tipos de objetos en un vector:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb11-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;v&quot;</span>)</span>
<span id="cb11-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb11-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;v&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb13-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>)</span>
<span id="cb13-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb13-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb15-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span><span class="sc">+</span>5i,<span class="dv">3</span><span class="sc">+</span>2i)</span>
<span id="cb15-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb15-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 4+5i 3+2i</code></pre>
<p>Imagina que deseas crear un vector numérico con una secuencia numérica del 1 al 10. Para hacerlo, deberías proceder como:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb17-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb17-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb17-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Es decir, no fue necesario insertar en el vector cada uno de los 10 números, sino que la secuencia continua (del 1 al 10) se señaló con los dos puntos.</p>
</div>
<div id="matrices" class="section level4 hasAnchor" number="2.2.2.2">
<h4><span class="header-section-number">2.2.2.2</span> Matrices<a href="r-una-introducción-desde-la-exploración-de-información.html#matrices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Las matrices son un tipo de objeto que se distingue porque entre sus propiedades está el de tener dimensión (filas y columnas). Se puede generar una matriz en R con la función <code>matrix()</code> y se procede como:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb19-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,<span class="at">nrow =</span> <span class="dv">2</span>,<span class="at">ncol =</span> <span class="dv">3</span>)</span></code></pre></div>
<p>Las funciones, tanto las previamente citadas como esta, requieren que el usuario indique <strong>argumentos</strong> que son los elementos que aparecen entre paréntesis. La función <code>matrix()</code> requirió indicar varios: los datos que forman el contenido que tendrá la matriz,<code>data=</code>, el número de filas , <code>nrow=</code> y el número de columnas, <code>ncol=</code>. Recuerda: toda función requiere especificar determinados argumentos para que pueda funcionar.</p>
<p>Alternativamente se pueden construir matrices a partir de vectores. Para ello, se pueden usar las funciones <code>cbind()</code> y <code>rbind()</code>. Primero creamos dos vectores, <code>x</code> y <code>y</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb20-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb20-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb20-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb22-1" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="dv">10</span><span class="sc">:</span><span class="dv">12</span></span>
<span id="cb22-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb22-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 10 11 12</code></pre>
<p>La función <code>cbind()</code> permite “unir por columna” (<em>column bind</em>) y <code>rbind()</code> que “une por fila” (<em>row bind</em>). Así, con los vectores previamente construidos podemos tener dos matrices diferentes, esto dependerá si las unimos por fila:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(x,y)</span></code></pre></div>
<pre><code>##      x  y
## [1,] 1 10
## [2,] 2 11
## [3,] 3 12</code></pre>
<p>o columna:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(x,y)</span></code></pre></div>
<pre><code>##   [,1] [,2] [,3]
## x    1    2    3
## y   10   11   12</code></pre>
</div>
<div id="factores" class="section level4 hasAnchor" number="2.2.2.3">
<h4><span class="header-section-number">2.2.2.3</span> Factores<a href="r-una-introducción-desde-la-exploración-de-información.html#factores" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Son un tipo especial de vectores y son utilizados para representar información categórica, lo que permite organizarla en niveles para analizarla mejor:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb28-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>,<span class="st">&quot;no&quot;</span>,<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>))</span>
<span id="cb28-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb28-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] yes no  no  yes no 
## Levels: no yes</code></pre>
<p>Por ejemplo, si la variable responde a la pregunta ¿el paciente recibió la vacuna contra COVID-19? y hay dos posibles respuestas, es recomendable que en lugar de designar cada alernativa como 1 o 2 se usen variables categóricas como “Vacuna aplicada” y “Vacuna no aplicada”, es decir, es recomendable almacenar la información como factor.</p>
</div>
<div id="data-frame-o-arreglo-de-datos" class="section level4 hasAnchor" number="2.2.2.4">
<h4><span class="header-section-number">2.2.2.4</span> <em>Data frame</em> o arreglo de datos<a href="r-una-introducción-desde-la-exploración-de-información.html#data-frame-o-arreglo-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Esta estructura de datos es la más usada para realizar análisis en R. Son estructuras de datos de dos dimensiones, es decir, están compuestas por filas y columnas. Los renglones de un <em>data frame</em> admiten datos de distintos tipos, pero sus columnas tienen la restricción de contener datos sólo de un tipo. Para comprender mejor esto piensa en un <em>data frame</em> como si de una hoja de cálculo se tratara: los renglones representan casos, individuos u observaciones, mientras que las columnas representan atributos, rasgos o variables. Una columna con la variable “ingreso” deberá ser del mismo tipo para todos los casos, por ejemplo un valor numérico, en tanto, para el caso o individuo 1 (fila 1) tendremos información relativa no sólo al ingreso, sino al sexo, estatura y edad, es decir, variables categóricas, numéricas y enteros, respectivamente.</p>
<p>Cuando arribemos un poco más adelante al proceso de importación de información al entorno de trabajo se presentará cómo luce un arreglo de datos de estas características.</p>
</div>
</div>
<div id="paquetes" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Paquetes<a href="r-una-introducción-desde-la-exploración-de-información.html#paquetes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se dijo que R es un programa especializado en el análisis estadístico y la representación gráfica, pero R no sólo se limita a lo que ofrece cuando lo descarga por primera vez. Uno de los elementos que hace de R una potente herramienta es la posibilidad de ampliar su potencial a través de la instalación de paquetes que expanden sus funciones básicas. Existen paquetes de R para múltiples campos disciplinares y especialidades, por ejemplo estas notas se sirven de los paquetes especializados en el análisis espacial, como se observará en los capítulos subsecuentes. De momento mencionemos sólo un par:</p>
<ul>
<li><code>tmap</code>: ofrece un enfoque flexible, basado en capas y fácil de usar para crear mapas temáticos.<br />
</li>
<li><code>spatialreg</code>: paquete para la elaboración de regresiones con componentes espaciales.</li>
</ul>
<p>Los paquetes, que expanden las capaciades de la versión base de R, son elaborados por múltiples colaboradores. Para conocer quines están detrás de ello, podemos usar la función <code>citation()</code>, que nos muestra cómo dar crédito a los autores de los paquetes cuando los usamos.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">&quot;tmap&quot;</span>)</span></code></pre></div>
<pre><code>## 
## To cite tmap/tmaptools in publications use:
## 
##   Tennekes M (2018). &quot;tmap: Thematic Maps in R.&quot; _Journal of
##   Statistical Software_, *84*(6), 1-39. doi:10.18637/jss.v084.i06
##   &lt;https://doi.org/10.18637/jss.v084.i06&gt;.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Article{,
##     title = {{tmap}: Thematic Maps in {R}},
##     author = {Martijn Tennekes},
##     journal = {Journal of Statistical Software},
##     year = {2018},
##     volume = {84},
##     number = {6},
##     pages = {1--39},
##     doi = {10.18637/jss.v084.i06},
##   }</code></pre>
<p>Para poder hacer uso de los paquetes que amplían el potencial de R es necesario descargarlos, instalarlos y, en cada sesión de trabajo, llamarlos. Para la descarga e instalación podemos ir a Archivo (<em>File</em>) en la cinta de menú que se localiza en la parte superior de tu entorno de trabajo y seleccionar <em>tools/install package</em>. A continuación, deberás colocar el nombre del paquete deseado y dar click en <em>instalar</em>. O bien, alternativamente, puedes ir a la sección de Archivo, en la zona inferior derecha, seleccionar la pestaña <em>Packages</em> y a continuación el ícono de <em>Install</em>. Una tercera manera de instalar paquetes es desde la consola (sección inferior izquierda), para instalar un paquete a la vez:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tmap&quot;</span>)</span>
<span id="cb32-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;spatialreg&quot;</span>)</span></code></pre></div>
<p>O bien, varios paquetes a la vez:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;tmap&quot;</span>, <span class="st">&quot;spatialreg&quot;</span>))</span></code></pre></div>
<p>Tras el proceso de instalación, en tu consola, R informará sobre el resultado de la instalación y te ofrecerá algunos datos sobre la ubicación del paquete en tu equipo. Para poder hacer uso de los paquetes no basta con descargarlos e instalarlos, es necesario “llamarlos” en cada sesión de trabajo de R para ser utilizados. Para ello deberás usar la función <code>library()</code> y como argumento el nombre del paquete:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code></pre></div>
</div>
<div id="solicitar-ayuda-de-un-paquete-o-función-de-r" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Solicitar ayuda de un paquete o función de R<a href="r-una-introducción-desde-la-exploración-de-información.html#solicitar-ayuda-de-un-paquete-o-función-de-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cada uno de los paquetes y funciones de R está acompañado por materiales de referencia que explican con detalle su uso, así como los diferentes argumentos en el caso de las funciones. Para solicitar ayuda en R puedes recurrir a la función <code>help()</code> e indicar como argumento el nombre de la función:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(tmap)</span></code></pre></div>
<p>Alternativamente, para solicitar ayuda puedes escribir un signo de interrogación y el nombre del paquete o dos signos para una función:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb36-1" aria-hidden="true" tabindex="-1"></a>?ggplot</span></code></pre></div>
<p>También puedes buscar ayuda de una función específica, por ejemplo, de las funciones para crear una matriz (<code>matrix()</code>)o para calcular una media (<code>mean()</code>):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(matrix)</span>
<span id="cb37-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(mean)</span></code></pre></div>
<p>En la cinta de menú, en la sección ayuda, <em>Help</em>, encontrarás una serie de materiales muy útiles para familiarizarse con los paquetes instalados. Estos materiales reciben el nombre de “hojas de trucos”, <em>Cheatsheet</em>. Se recomienda ampliamente revisar cada una de ellas, incluidas las <a href="https://posit.co/resources/cheatsheets/?type=translations/">versiones en epañol</a>. Además, R es un programa con un sin número de entusiastas usuarios y con un amplio soporte técnico por lo que cuando te encuentres con una dificultad para usar algún paquete o función puedes remitite al sitio de <a href="https://www.r-project.org/help.html">Ayuda del R</a>, o bien, a alguno de los repositorios especializados para presentar y resolver dudas como <a href="https://es.stackoverflow.com/">Stackoverflow</a>. Para ilustrar esto, ingresa al sitio de Stackoverflow y coloca en la búsqueda “histograma en R”.</p>
</div>
</div>
<div id="cargar-bases-de-datos" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Cargar bases de datos<a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-bases-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div style="text-align: justify">
<p>En R hay algunas bases de datos que acompañan los paquetes que han sido instalados y sirven para ilustrar su funcionamiento. Las bases precargadas se pueden observar con la siguiente función:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code></pre></div>
<p>Verás una nueva pestaña en la sección de <em>Fuente</em> con el nombre de las bases y una breve descripción. Para cargar alguna de ellas basta introducir su nombre como argumento de la función <code>data()</code>, por ejemplo:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(CO2)</span></code></pre></div>
<div id="cargar-un-archivo-de-excel-xls-xslx" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Cargar un archivo de Excel (xls, xslx)<a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-un-archivo-de-excel-xls-xslx" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>tidyverse</code> es un conjunto de paquetes diseñados especialmente para la Ciencia de Datos. Algunos de los paquetes de la familia <code>tidyverse</code> que usaremos aquí y un poco más adelante son:<br />
* <code>ggplot2</code>: es un sistema para crear gráficos basado en la llamada gramática de las gráficas.<br />
* <code>dplyr</code>: proporciona una serie de funciones para manipulación de datos. * <code>readr</code>: permite leer datos rectangualres provenientes de múltiples formatos.</p>
<p>Como más adelante usaremos otros de los paquetes de la familia <code>tidyverse</code> instalaremos todos en este momento:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Si deseas aprender cómo usar con detalle los paquetes de la familia <code>tidyverse</code> y elementos básicos de Ciencia de Datos, el libro de Hadley Wickham y Garrett Grolemund, <a href="https://r4ds.had.co.nz/index.html">R for Data Science</a> es una magnífica opción de la que existe una <a href="https://es.r4ds.hadley.nz/">versión en castellano</a>.</p>
<p>Utilizando el paquete <code>readxl</code> de la familia <code>tidyverse</code> es posible cargar una base de datos en el formato de la popular hoja de cálculo de Microsoft Office. A partir de aquí introduciremos una notación particular al usar una función en R, lo que te permitirá recordar a qué paquete pertenece dicha función. La notación es: “paquete :: función()”, es decir, primero se colocará el nombre del paquete y, separado por dos pares de dos puntos, en el nombre de la función que pertenece a dicho paquete (resulta claro que los paquetes están entonces integrados por múltiples funciones).</p>
<p>Sigamos los siguientes pasos para cargar la base de datos <a href="https://bit.ly/covid_zmvm"><code>covid_zmvm.xlsx</code></a> que contiene información de los casos positivos y defunciones por COVID19 en los municipios de la Zona Metropolitana del Valle de México durante la primera ola de la pandemia, entre marzo a septiembre de 2020, así como múltiples variables sociodemográficas y económicas.</p>
<p>Llamemos específicamente al paquete que nos interesa:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code></pre></div>
<p>La función para cargar un libro de Excel es <code>read_excel()</code> y el argumento indispensable es la ruta o directorio donde está almacenado nuestro libro, el nombre y extensión del mismo, <code>path</code>. Creemos pues el objeto <code>covid_zmvm</code>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Al hacer uso de la notación readxl::read_excel, no es necesario usar library(readxl). Sin embargo, por cuestiones pedagógicas si lo haremos</span></span>
<span id="cb42-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb42-2" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path=</span><span class="st">&quot;base de datos</span><span class="sc">\\</span><span class="st">covid_zmvm.xlsx&quot;</span>)</span></code></pre></div>
<p>Para que puedas cargar satisfactoriamente la base, deberás sustituir la ruta por el directorio en el que está almacenado el archivo en tu equipo de cómputo. Una función útil para generar la cadena de texto de la ruta es <code>file.choose()</code>, del paquete <code>base</code> de R. Lleva a la consola el código:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb43-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">file.choose</span>()</span></code></pre></div>
<p>y presiona <em>enter</em>, verás que aparece un cuadro de diálogo en el que deberás seleccionar el archivo deseado y luego pulsar “abrir”. El resultado aparecerá en tu consola como una cadena de texto entre comillas. Usa esa información para leer la base <code>covid_zmvm</code>.</p>
<p>Revisa la ayuda de la función <code>read_excel()</code> para comprender todos los argumentos con los que puede operar la función y que te permitirán personalizar la carga de la base de datos en caso de que tengas múltiples hojas en el libro de Excel o desees rangos personalizados para importar.</p>
<hr />
<p><strong>Ejercicio</strong></p>
<ol style="list-style-type: decimal">
<li><p>¿Quién es el autor o autora del paquete <code>readxl</code>?</p></li>
<li><p>Descarga la hoja de trucos del paquete desde el sitio de tidyverse y responde, ¿el paquete sirve sólo para cargar información o es posible escribir y almacenar bases de datos con él?</p></li>
</ol>
<hr />
</div>
<div id="cargar-archivos-separados-por-comas-csv" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Cargar archivos separados por comas (csv)<a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-archivos-separados-por-comas-csv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alternativamente, es posible que la base que deseemos cargar se encuentre en un formato diferente, por ejemplo, una base de datos con valores separados por comas (<em>coma separate values</em>, CSV). Para cargar una base en dicho formato, usaremos el paquete <code>readr</code>, que forma parte del paquete <code>utils</code></p>
<p>Llama el paquete a tu entorno de trabajo:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code></pre></div>
<p>Con la función anterior, <code>file.choose()</code> obtendremos la cadena de texto que indica la ruta del archivo a cargar:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb45-1" aria-hidden="true" tabindex="-1"></a>ruta <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">file.choose</span>()</span></code></pre></div>
<p>Y, finalmente, cargamos la información con la función <code>read.csv()</code></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb46-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">read.csv</span>(ruta)</span></code></pre></div>
</div>
<div id="cargar-bases-con-la-funcionalidad-importar" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Cargar bases con la funcionalidad importar<a href="r-una-introducción-desde-la-exploración-de-información.html#cargar-bases-con-la-funcionalidad-importar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Otra manera de cargar archivos de Excel o de texto (formato CSV) es ubicarnos en la sección de ambiente, ventana superior derecha, y seleccionar el ícono <em>Import Dataset</em>. Se desplegará un menú donde habremos de elegir el tipo de archivo que se desee importar. R no sólo permite importar archivos de texto o Excel, también bases de SPSS o STATA. Siguiendo con la ilustración relativa a libros de Excel, en la ventana que se despliega, habremos de señalar la ruta exacta o directorio donde está nuestro archivo, incluyendo el nombre y extensión de éste. Al pulsar en el botón actulizar (<em>Update</em>) se desplegara una vista previa de la base. Si aparece de forma correcta, seleccionaremos importar (<em>Import</em>), en caso contrario, se deberá modificar las opciones de importación. Después de seleccionar Import Dataset/From Excel y elegir la ubicación del archivo que deseas importar, deberías ver en tu pantalla una imagen como la de la Figura 1.3:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-32"></span>
<img src="recursos%20intro/Figura_3-Importar.jpg" alt="Importar datos de excel" width="120%" />
<p class="caption">
Figura 2.2: Importar datos de excel
</p>
</div>
</div>
</div>
<div id="exploración-inicial-a-través-de-gráficos" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Exploración inicial a través de gráficos<a href="r-una-introducción-desde-la-exploración-de-información.html#exploración-inicial-a-través-de-gráficos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div style="text-align: justify">
<p>Ahora que has revisado algunas de las diversas maneras de cargar tu información al entorno de trabajo en R, es momento de comenzar a analizarla. Si importaste la base de datos a través de la función <code>readxl::read_excel()</code> notarás que el nuestra base <code>covid_zmvm</code> un objeto de tipo <a href="https://tibble.tidyverse.org/reference/tbl_df-class.html"><code>tbl_df</code></a> que es un subtipo de <code>data.frame</code> o arreglo de datos como el que se mencionó antes.</p>
<p>Las siguientes instrucciones nos ayudarán a conocer los nombres de las columnas, la estructura de los datos y la dimensión de la base:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb47-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">names</span>(covid_zmvm) <span class="co">#Nombres de las variables</span></span></code></pre></div>
<pre><code>##  [1] &quot;cvemun&quot;     &quot;cve_mun&quot;    &quot;nom_mun&quot;    &quot;cve_ent&quot;    &quot;nom_ent&quot;   
##  [6] &quot;nom_abr&quot;    &quot;nom_zm&quot;     &quot;cvm&quot;        &quot;ext&quot;        &quot;pob20&quot;     
## [11] &quot;pob20_h&quot;    &quot;pob20_m&quot;    &quot;positivos&quot;  &quot;defuncione&quot; &quot;pos_mil&quot;   
## [16] &quot;pos_hab&quot;    &quot;def_hab&quot;    &quot;ss&quot;         &quot;ppob_sines&quot; &quot;ppob_basi&quot; 
## [21] &quot;ppob_media&quot; &quot;ppob_sup&quot;   &quot;ocviv&quot;      &quot;occu&quot;       &quot;pintegra4_&quot;
## [26] &quot;pintegra6_&quot; &quot;pintegra8_&quot; &quot;ppob_5_o_m&quot; &quot;ppob_3_o_m&quot; &quot;ppob_1&quot;    
## [31] &quot;ppob_1dorm&quot; &quot;ppob_2dorm&quot; &quot;ppob_3dorm&quot; &quot;pviv_ocu5_&quot; &quot;pviv_ocu7_&quot;
## [36] &quot;pviv_ocu9_&quot; &quot;analf&quot;      &quot;sbasc&quot;      &quot;vhac&quot;       &quot;po2sm&quot;     
## [41] &quot;idh2015&quot;    &quot;im&quot;         &quot;gm_2020&quot;    &quot;grad&quot;       &quot;grad_h&quot;    
## [46] &quot;grad_m&quot;     &quot;poind&quot;      &quot;pocom&quot;      &quot;poss&quot;       &quot;tmind&quot;     
## [51] &quot;tmcom&quot;      &quot;tmss&quot;       &quot;rmind&quot;      &quot;rmcom&quot;      &quot;rmss&quot;      
## [56] &quot;den&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb49-1" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">str</span>(covid_zmvm) <span class="co">#Estructura de la base de datos</span></span></code></pre></div>
<pre><code>## tibble [76 × 56] (S3: tbl_df/tbl/data.frame)
##  $ cvemun    : chr [1:76] &quot;09010&quot; &quot;09012&quot; &quot;09015&quot; &quot;09017&quot; ...
##  $ cve_mun   : chr [1:76] &quot;010&quot; &quot;012&quot; &quot;015&quot; &quot;017&quot; ...
##  $ nom_mun   : chr [1:76] &quot;Álvaro Obregón&quot; &quot;Tlalpan&quot; &quot;Cuauhtémoc&quot; &quot;Venustiano Carranza&quot; ...
##  $ cve_ent   : chr [1:76] &quot;09&quot; &quot;09&quot; &quot;09&quot; &quot;09&quot; ...
##  $ nom_ent   : chr [1:76] &quot;Ciudad de México&quot; &quot;Ciudad de México&quot; &quot;Ciudad de México&quot; &quot;Ciudad de México&quot; ...
##  $ nom_abr   : chr [1:76] &quot;CDMX&quot; &quot;CDMX&quot; &quot;CDMX&quot; &quot;CDMX&quot; ...
##  $ nom_zm    : chr [1:76] &quot;Valle de México&quot; &quot;Valle de México&quot; &quot;Valle de México&quot; &quot;Valle de México&quot; ...
##  $ cvm       : num [1:76] 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 ...
##  $ ext       : num [1:76] 96.2 310.4 32.5 33.9 85.8 ...
##  $ pob20     : num [1:76] 759137 699928 545884 443704 392313 ...
##  $ pob20_h   : num [1:76] 361007 334877 260951 210118 190190 ...
##  $ pob20_m   : num [1:76] 398130 365051 284933 233586 202123 ...
##  $ positivos : num [1:76] 10905 11887 7289 7172 6812 ...
##  $ defuncione: num [1:76] 868 542 754 585 289 713 648 397 190 391 ...
##  $ pos_mil   : num [1:76] 14.4 17 13.4 16.2 17.4 ...
##  $ pos_hab   : num [1:76] 14.4 17 13.4 16.2 17.4 ...
##  $ def_hab   : num [1:76] 1.143 0.774 1.381 1.318 0.737 ...
##  $ ss        : num [1:76] 75 71.1 71.6 71.6 72.7 ...
##  $ ppob_sines: num [1:76] 0.0204 0.0195 0.0119 0.0121 0.0193 ...
##  $ ppob_basi : num [1:76] 0.41 0.391 0.307 0.379 0.469 ...
##  $ ppob_media: num [1:76] 0.252 0.253 0.251 0.291 0.299 ...
##  $ ppob_sup  : num [1:76] 0.314 0.335 0.427 0.316 0.211 ...
##  $ ocviv     : num [1:76] 3.45 3.44 2.75 3.26 3.67 3.21 3.2 3.74 3.6 2.81 ...
##  $ occu      : num [1:76] 0.81 0.81 0.72 0.82 0.93 0.77 0.7 0.91 0.81 0.66 ...
##  $ pintegra4_: num [1:76] 0.648 0.644 0.48 0.609 0.699 ...
##  $ pintegra6_: num [1:76] 0.252 0.226 0.142 0.219 0.262 ...
##  $ pintegra8_: num [1:76] 0.1071 0.0864 0.0422 0.0798 0.0982 ...
##  $ ppob_5_o_m: num [1:76] 0.726 0.73 0.888 0.821 0.792 ...
##  $ ppob_3_o_m: num [1:76] 0.32 0.315 0.363 0.354 0.354 ...
##  $ ppob_1    : num [1:76] 0.0369 0.0499 0.0249 0.0247 0.0513 ...
##  $ ppob_1dorm: num [1:76] 0.211 0.212 0.199 0.202 0.209 ...
##  $ ppob_2dorm: num [1:76] 0.566 0.547 0.8 0.696 0.614 ...
##  $ ppob_3dorm: num [1:76] 0.832 0.848 0.947 0.89 0.864 ...
##  $ pviv_ocu5_: num [1:76] 0.226 0.22 0.127 0.198 0.267 ...
##  $ pviv_ocu7_: num [1:76] 0.0641 0.0568 0.026 0.0513 0.0701 ...
##  $ pviv_ocu9_: num [1:76] 0.02334 0.01815 0.00645 0.01593 0.02167 ...
##  $ analf     : num [1:76] 1.574 1.606 0.953 1.085 1.673 ...
##  $ sbasc     : num [1:76] 19 18.2 13.5 16.9 20.3 ...
##  $ vhac      : num [1:76] 15.25 15.19 9.42 14.43 18.3 ...
##  $ po2sm     : num [1:76] 49.3 61.2 41.4 57.2 65.4 ...
##  $ idh2015   : num [1:76] 0.815 0.832 0.854 0.826 0.784 0.842 0.868 0.812 0.812 0.888 ...
##  $ im        : num [1:76] 60.4 59.5 61.3 60.3 59.3 ...
##  $ gm_2020   : chr [1:76] &quot;Muy Bajo&quot; &quot;Muy Bajo&quot; &quot;Muy Bajo&quot; &quot;Muy Bajo&quot; ...
##  $ grad      : num [1:76] 11.3 11.5 12.4 11.5 10.5 ...
##  $ grad_h    : num [1:76] 11.5 11.7 12.8 11.7 10.7 ...
##  $ grad_m    : num [1:76] 11.1 11.4 12.1 11.3 10.4 ...
##  $ poind     : num [1:76] 0.0912 0.0874 0.1334 0.0714 0.2442 ...
##  $ pocom     : num [1:76] 0.16 0.185 0.166 0.289 0.394 ...
##  $ poss      : num [1:76] 0.749 0.728 0.7 0.64 0.361 ...
##  $ tmind     : num [1:76] 20.32 8.9 27.57 6.57 6.42 ...
##  $ tmcom     : num [1:76] 5.95 3.48 4.36 2.66 2.12 ...
##  $ tmss      : num [1:76] 27.69 13.91 24.87 9.94 2.59 ...
##  $ rmind     : num [1:76] 68.2 116.7 55.9 64.9 78.3 ...
##  $ rmcom     : num [1:76] 50.6 31.3 45.5 31.2 23.5 ...
##  $ rmss      : num [1:76] 178.3 36.3 255.6 101.4 23.4 ...
##  $ den       : num [1:76] 7895 2255 16786 13104 4575 ...</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb51-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">dim</span>(covid_zmvm) <span class="co">#Dimensiones de la base</span></span></code></pre></div>
<pre><code>## [1] 76 56</code></pre>
<p>Recuerda la notación que mencionamos antes, “paquete::función”; además, si el paquete está cargado, no es necesario especificar su nombre al usar la función; al arrancar cada sesión de R, un conjunto de paquetes se cargan de forma automática, dichos paquetes aparecen marcados con una palomita, <span class="math inline">\(\checkmark\)</span>, en la pestaña <em>Packages</em> en la sección de archivo.</p>
<p>Ahora bien, si deseas ver la base completa puedes llamarla a una nueva pestaña que se visualizará en la sección de fuente. Usa la siguiente instrucción:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb53-1" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">View</span>(covid_zmvm)</span>
<span id="cb53-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Que es equivalente a:</span></span>
<span id="cb53-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(covid_zmvm)</span></code></pre></div>
<p>Alternativamente, puedes llamar la base para que aparezca en la consola, lo que no siempre es recomendable si la base es muy grande.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb54-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">print</span>(covid_zmvm)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137
##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928
##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884
##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704
##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313
##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205
##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447
##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178
##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686
## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470
## # … with 66 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<p>En su lugar, podrías preferir ver en la consola sólo los últimos y primeros casos:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb56-1" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">head</span>(covid_zmvm) <span class="co">#Para los primeros casos</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 56
##   cvemun cve_mun nom_mun       cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 09010  010     Álvaro Obreg… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137
## 2 09012  012     Tlalpan       09      Ciudad… CDMX    Valle…  9.01 310.  699928
## 3 09015  015     Cuauhtémoc    09      Ciudad… CDMX    Valle…  9.01  32.5 545884
## 4 09017  017     Venustiano C… 09      Ciudad… CDMX    Valle…  9.01  33.9 443704
## 5 09011  011     Tláhuac       09      Ciudad… CDMX    Valle…  9.01  85.8 392313
## 6 09002  002     Azcapotzalco  09      Ciudad… CDMX    Valle…  9.01  33.5 432205
## # … with 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;, positivos &lt;dbl&gt;,
## #   defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;, def_hab &lt;dbl&gt;, ss &lt;dbl&gt;,
## #   ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;, ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;,
## #   ocviv &lt;dbl&gt;, occu &lt;dbl&gt;, pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;,
## #   pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;, ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;,
## #   ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;, ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;,
## #   pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, analf &lt;dbl&gt;, sbasc &lt;dbl&gt;, vhac &lt;dbl&gt;, …</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb58-1" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">tail</span>(covid_zmvm) <span class="co">#Para los últimos casos</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 56
##   cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm    ext  pob20
##   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 15120  120     Zumpango     15      México  Mex.    Valle…  9.01 224.   2.80e5
## 2 15121  121     Cuautitlán … 15      México  Mex.    Valle…  9.01 110.   5.55e5
## 3 15122  122     Valle de Ch… 15      México  Mex.    Valle…  9.01  46.6  3.92e5
## 4 15125  125     Tonanitla    15      México  Mex.    Valle…  9.01   9.04 1.49e4
## 5 15058  058     Nezahualcóy… 15      México  Mex.    Valle…  9.01  63.3  1.08e6
## 6 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9  1.17e6
## # … with 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;, positivos &lt;dbl&gt;,
## #   defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;, def_hab &lt;dbl&gt;, ss &lt;dbl&gt;,
## #   ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;, ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;,
## #   ocviv &lt;dbl&gt;, occu &lt;dbl&gt;, pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;,
## #   pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;, ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;,
## #   ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;, ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;,
## #   pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, analf &lt;dbl&gt;, sbasc &lt;dbl&gt;, vhac &lt;dbl&gt;, …</code></pre>
<p>¿Qué tan grande es la base de datos? Si bien ya la función <code>str()</code> nos brindó información sobre la estructura de la base, puedes conocer el número de filas y columnas que componen tu arreglo de datos con las siguientes funciones:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb60-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">ncol</span>(covid_zmvm) <span class="co">#Para conocer el número de columnas</span></span></code></pre></div>
<pre><code>## [1] 56</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb62-1" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">nrow</span>(covid_zmvm) <span class="co">#Para conocer el número de filas</span></span></code></pre></div>
<pre><code>## [1] 76</code></pre>
<p>Conviene que se revise el <a href="https://bit.ly/diccionario_covid_zmvm">archivo en formato txt</a> que acompaña nuestra base y que opera a modo de diccionario para que conocer el significado de cada una de las variables que componen nuestro archivo.</p>
<p>Plantemos pues algunas preguntas y busquemos responderlas a través de un análisis gráfico:</p>
<ul>
<li>¿Habrá alguna relación entre el número de casos positivos por cada mil habitantes, <code>pos_hab</code>, o muertes por cada mil habitantes, <code>def_hab</code>, con el nivel de estudios promedio de la población por municipio?</li>
<li>Si esta relación existe, ¿es más intensa entre las muertes o los casos positivos?</li>
</ul>
<p>Para responder a esta pregunta podemos recurrir a la construcción de diagramas de dispersión. La elaboración de gráficas dentro de <code>tidyverse</code> corre a cargo del paquete <code>ggplot2</code>, una potente librería para la representación visual de información. Este paquete se basa en lo que se denomina “gramática de gráficas” que no es otra cosa que un conjunto de reglas coherentes con base en las cuales se elaboran los gráficos <span class="citation">(<a href="#ref-Wickham2016" role="doc-biblioref">Wickham and Grolemund 2016</a>)</span>.</p>
<p>La construcción de gráficas con <code>ggplot2</code> se hace a partir de una suerte de “capas” o “enunciados”. Cada enunciado constituye una parte de la gráfica. Según la hoja de trucos del paquete (que puedes consultar desde la barra de menú en la opción Help/CheatSheet):</p>
<blockquote>
<p>ggplot2 se basa en la gramática de los gráficos, la idea de que puedes construir cada gráfico a partir de los mismos componentes: un conjunto de datos, un sistema de coordenadas y “geoms”, es decir, marcas visuales que representan puntos de datos.</p>
</blockquote>
<p>Asi pues, se requieren tres elementos para la construcción de una gráfica con <code>ggplot2</code>: datos, geometría y sistema de coordenadas. Dentro de la geometría se especifican no sólo la o las variables a representar, también algunos elementos estéticos como colores. En nuestro caso, la información está contenida en la base <code>covid_zmvm</code> pero habrá que especificar qué tipo de gráfica deseamos y sus elementos estéticos. Veamos esto en acción:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb64-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb64-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data=</span>covid_zmvm)<span class="sc">+</span></span>
<span id="cb64-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>Tenemos pues dos enunciados o “capas”. La primera corresponde a la función <code>ggplot()</code> donde colocamos (casi siempre) el primer elemento requerido: la base de datos de donde tomaremos la o las variables a graficar, en tanto, el segundo enunciado corresponde a la geometría, <code>geom_</code> cuya parte después del guion bajo se modificará en función del tipo de gráfica a utilizar. Algunos (sólo algunos) tipos de gráficas y su función de geometría asociada en <code>ggplot2</code> aparecen en el cuadro 1.2:</p>
<table>
<caption>Cuadro 1.2</caption>
<thead>
<tr class="header">
<th>Gráfica</th>
<th>Geometría en <code>ggplot2</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Histograma</td>
<td>geom_histogram()</td>
</tr>
<tr class="even">
<td>Densidad</td>
<td>geom_density()</td>
</tr>
<tr class="odd">
<td>Caja</td>
<td>geom_boxplot()</td>
</tr>
<tr class="even">
<td>Barras</td>
<td>geom_col() geom_bar()</td>
</tr>
<tr class="odd">
<td>Dispersión</td>
<td>geom_point()</td>
</tr>
<tr class="even">
<td>Tendencia (lineal o suavizada)</td>
<td>geom_smooth()</td>
</tr>
</tbody>
</table>
<p>Por favor, revisa la hoja de trucos del paquete para que te familiarices con las otras tantas geometrías y su uso, pues cada geometría requiere diferentes argumentos y admite varias posibles configuraciones. En general, dentro de la función de geometría, <code>geom_</code>, será necesario especificar los elementos estéticos, <code>aes()</code>, entre los que se cuenta la o las variables a graficar y cómo serán representadas.</p>
<p>Añadamos una “capa” adicional a nuestra gráfica, combinando otra geometría como una línea de ajuste (pongamos atención en el uso del signo de más):</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb65-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data=</span>covid_zmvm)<span class="sc">+</span></span>
<span id="cb65-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab))<span class="sc">+</span></span>
<span id="cb65-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>Puedes ver cómo, al añadir una nueva geometría, fue necesario especificar los elementos estéticos del caso, pero los tres enunciados nos permiten tener una sola gráfica. Observa cómo R en tu consola R indica que estás usando determinado método de suavizamiento, el llamado “loess” que significa <em>locally estimated scatterplot smoothing</em>, por tanto, es fácil deducir que debe haber otros métodos de suavizamiento. Observa las siguientes líneas de código:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb66-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data=</span>covid_zmvm)<span class="sc">+</span></span>
<span id="cb66-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab))<span class="sc">+</span></span>
<span id="cb66-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>Aquí, hemos añadido un argumento adicional, <code>method=</code>, para indicar un suavizamiento dado por un modelo lineal, <code>lm</code>, de <em>linear model</em>. Tenemos pues que entre el número de casos positivos y el número promedio de grados cursados hay una aparente relación positiva. ¿Qué hay para el caso de las defunciones:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb67-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data=</span>covid_zmvm)<span class="sc">+</span></span>
<span id="cb67-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>def_hab))<span class="sc">+</span></span>
<span id="cb67-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>def_hab), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<p>Si bien hay un poco más de dispersión, la aparente relación positiva se mantiene. ¿Qué crees que explique esta asociación? ¿Las personas con más años estudiados son susceptibles de contagiarse más fácil de COVID19? ¿O quizá se relacionará más con las diferencias que a nivel territorial se dan entre los niveles de estudio de la población en el Valle de México?</p>
<hr />
<p><strong>Ejercicio</strong></p>
<p>Elabora algunas gráficas de dispersión para responder a las siguientes preguntas:<br />
</p>
<ol style="list-style-type: lower-roman">
<li><p>¿Qué tipo de asociación lineal hay entre los casos positivos y defunciones por COVID19 con las características de la población según el número de dormitorios de las casas, el número de personas que habitan en cada casa y la densidad de población?</p></li>
<li><p>¿Encuentras algún tipo de asociación entre las variables COVID19 y las características económicas de los municipios de la Zona Metropolitana del Valle de México?</p></li>
</ol>
<hr />
<p>Quizá lo que te interese no sólo sea la asociación entre pares de variables, sino el comportamiento individual de cada variable para conocer la forma de su distribución e identificar algunos valores extremos o atípicos (los llamados <em>ourliers</em>). Para ello, convendrá un tipo de gráfica que permita representar sólo una variable continúa (casos positivos o defunciones por COVID19), tal como un histograma, una gráfica de densidad o de caja.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Histograma para los casos positivos por cada mil habitantes</span></span>
<span id="cb68-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb68-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb68-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>pos_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico de densidad para los casos positivos por cada mil habitantes</span></span>
<span id="cb69-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb69-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb69-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>pos_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-2.png" width="672" /></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico de caja para los casos positivos por cada mil habitantes</span></span>
<span id="cb70-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb70-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb70-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>pos_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-3.png" width="672" /></p>
<p>Los tres gráficos dan cuenta que la forma de la distribución muestra un marcado sesgo positivo (a la derecha), lo que significa que hay algunos municipios o alcaldías con valores muy altos para esta variable, además de algunos valores extremadamente altos según el diagrama de caja, ¿cuáles podrán ser y qué explicaría este comportamiento atípicamente alto?</p>
<hr />
<p><strong>Ejercicio</strong></p>
<p>Consulta la ayuda de cada una de las funciones de geometría e intenta:</p>
<ol style="list-style-type: lower-roman">
<li><p>Elaborar un histograma con diferentes categorías (<code>bins</code>). ¿Cambia esto la forma de la distribución?</p></li>
<li><p>Señalar de un color diferente las observaciones atípicas en el diagrama de caja ¿Hay manera de identificar a qué alcaldías o municipios pertenecen dichos valores atípicos?</p></li>
</ol>
<hr />
<p>Además, también es posible modificar las etiquetas de los ejes:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb71-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data=</span>covid_zmvm)<span class="sc">+</span></span>
<span id="cb71-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>pos_hab))<span class="sc">+</span></span>
<span id="cb71-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Casos positivos por cada mil habitantes&quot;</span>, <span class="at">y=</span><span class="st">&quot;Frecuencia&quot;</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with
## `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>Nuestra base de datos contiene una variable de tipo categórico, grado de marginación (<code>gm_2020</code>), asociada al índice de marginación (<code>im</code>). Para este tipo de variable puede ser conveniente construir un gráfico de barras especialmente diseñado para variables categóricas echando mano de la geometría <code>geom_bar()</code>:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb73-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb73-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb73-2" aria-hidden="true" tabindex="-1"></a> ggplot2<span class="sc">::</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>gm_2020))<span class="sc">+</span></span>
<span id="cb73-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Grado de marginación 2020&quot;</span>, <span class="at">y=</span><span class="st">&quot;Frecuencia&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Si tienes la librería ggplot2 cargada en el enorno de trabajo, alternativamente, puedes escribir:</span></span>
<span id="cb74-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb74-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb74-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>gm_2020))<span class="sc">+</span></span>
<span id="cb74-4"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Grado de marginación 2020&quot;</span>, <span class="at">y=</span><span class="st">&quot;Frecuencia&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-44-2.png" width="672" /></p>
<p>Este gráfico revela que, de acuerdo con la clasificación del Consejo Nacional de Población y Vivienda (CONAPO), la gran mayoría de los municipios y alcaldías que componen el Valle de México están catalogados como de muy bajo grado de marginación.</p>
<hr />
<p><strong>Ejercicio</strong></p>
<ol style="list-style-type: lower-roman">
<li>Obtén una gráfica de barras donde se muestre el número de unidades administrativas (municipios o alcaldías) por de cada una de las entidades que integran la Zona Metropolitana del Valle de México.</li>
</ol>
<hr />
<p>Ahora bien, ¿será posible incorporar en un plano bidimensional una tercera variable? ¿Cómo añadirías a un diagrama de dispersión, que relaciona dos variables, una tercera? Este instrumento es a veces denominado gráfico de burbujas y si lo piensas con cuidado es una solución muy ingeniosa para añadir información extra sin renunciar a la simpleza. Para hacerlo, basta con añadir el argumento <code>size=</code> dentro de los elementos estéticos de la función <code>geom_point()</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tamaño del circulo dado por los años estudiados</span></span>
<span id="cb75-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb75-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb75-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab,<span class="at">size=</span>def_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Transparencia del círculo dado por los años estudiados</span></span>
<span id="cb76-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb76-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb76-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab,<span class="at">alpha=</span>def_hab, <span class="at">size=</span>def_hab), <span class="at">color=</span><span class="st">&quot;navyblue&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-45-2.png" width="672" /></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Transparencia del círculo dado por los años estudiados</span></span>
<span id="cb77-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb77-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(covid_zmvm)<span class="sc">+</span></span>
<span id="cb77-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>grad,<span class="at">y=</span>pos_hab,<span class="at">color=</span>def_hab))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-45-3.png" width="672" /></p>
<hr />
<p><strong>Ejercicio</strong></p>
<p>Responde lo siguiente:</p>
<ol style="list-style-type: lower-roman">
<li><p>Prueba cambiar la variable que define el tamaño del círculo por nuestra variable categórica grado de marginación, ¿es recomendable usar una variable de este tipo en esta representación?</p></li>
<li><p>¿Qué papel juega el argumento <code>alpha=</code> en la segunda gráfica?</p></li>
<li><p>¿Cuál es la diferencia en colocar el argumento <code>color</code> dentro o fuera del grupo de elementos estéticos (<code>aes()</code>)? ¿Notaste la diferencia en el par de gráficas anteriores? Prueba cambiar el argumento color dentro de <code>aes()</code> por otra variable y el color de los círculos.</p></li>
</ol>
<hr />
<p>Finalmente, elaboremos una gráfica que nos ayude a sintetizar pares de asociaciones entre variables (diagramas de dispersión) y formas de distribución a través de un gráfico muy elegante construido con una extensión del paquete <code>ggplot2</code>: <code>GGally</code>. Para instalarlo, como es usual:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;GGally&quot;</span>)</span></code></pre></div>
<p>Luego, para poder usarlo, lo llamamos al entorno de trabajo:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code></pre></div>
<p>La gráfica que buscamos es una matriz de diagramas de dispersión y la construiremos con la función <code>ggpairs()</code> y sólo dos argumentos: la fuente de datos y las variables que deseamos incluir. Veamos:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Definiendo los nombres de las variables</span></span>
<span id="cb80-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb80-2" aria-hidden="true" tabindex="-1"></a>GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">data=</span>covid_zmvm, <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&quot;pos_hab&quot;</span>,<span class="st">&quot;def_hab&quot;</span>,<span class="st">&quot;im&quot;</span>,<span class="st">&quot;grad&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Indicando el número de columna según el lugar que ocupa en la base</span></span>
<span id="cb81-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb81-2" aria-hidden="true" tabindex="-1"></a>GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">data=</span>covid_zmvm, <span class="at">columns =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">41</span>,<span class="dv">43</span>))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with
## `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with
## `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with
## `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-48-2.png" width="672" /></p>
<p>La matriz de diagramas de dispersión construida con <code>ggpairs</code> es, desde mi personal punto de vista, no sólo muy elegante, sino que ofrece elementos informativos en el gráfico que antes no teníamos, tales como el coeficiente de correlación lineal y su nivel de significancia.</p>
<p>Antes de pasar a tratar otro elemento, hay que decir que RStudio permite exportar las gráficas hechas, tanto en diversos formatos de imagen (jpg, png, tiff) como en PDF.</p>
<hr />
<p><strong>Ejercicio</strong></p>
<ol style="list-style-type: lower-roman">
<li>Elabora tu propia matriz de diagramas de dispersión con las variables que, a tu juicio, resulten más relevantes para explicar la dinámica tanto de las muertes como de los casos positivos de COVID19.</li>
</ol>
<hr />
</div>
<div id="manipulación-de-la-información" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Manipulación de la información<a href="r-una-introducción-desde-la-exploración-de-información.html#manipulación-de-la-información" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div style="text-align: justify">
<div id="seleccionar-variables" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Seleccionar variables<a href="r-una-introducción-desde-la-exploración-de-información.html#seleccionar-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tareas relacionadas con la preparación y manipulación de datos, que en una hoja de cálculo como Excel de Office o Calc de LibreOffice, son rutinarias y muy sencillas, a veces en R pueden significar un dolor de cabeza. No obstante, dentro de los paquetes de la familia <code>tidyverse</code> encontramos <code>dplyr</code>. Este paquete brinda herramientas de manipulación de datos basadas en “gramática”, que no es otra cosa que funciones (“verbos”) que permiten seleccionar o filtrar elementos en una base de datos, o bien, agrupar y crear nuevas variables.</p>
<p>Si deseas profundizar en el conocimiento de este potente paquete consulta la <a href="https://dplyr.tidyverse.org/">Introducción al paquete <code>dplyr</code></a>, o bien, su <a href="http://127.0.0.1:28602/library/dplyr/doc/dplyr.html">Viñeta de ayuda</a>.</p>
<p>La base de datos que cargamos contiene 55 columnas, es decir, 55 variables. Quizá para su análisis no te sean de interés todas, por lo que querrías generar una base de datos más compacta mediante la <strong>selección</strong> de algunas que son de utilidad. Para llevar a cabo dicha tarea echaremos mano de la función <code>select()</code>, pero antes de hacerlo, es necesario introducir el operador “tubería”, <em>pipe</em> (<code>%&gt;%</code>).</p>
<p>Este operador sirve para indicar cada fase del proceso por el que un objeto es tratado a través de la aplicación de diferentes funciones u operaciones. Por ejemplo, queremos que la base <code>covid_zmvm</code> “pase” por un proceso que consiste en la selección de sólo algunas variables. Comencemos usando el “verbo” seleccionar, <code>select()</code>, para una sola variable, por ejemplo <code>pos_hab</code>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb83-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(pos_hab)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 1
##    pos_hab
##      &lt;dbl&gt;
##  1    14.4
##  2    17.0
##  3    13.4
##  4    16.2
##  5    17.4
##  6    17.3
##  7    14.9
##  8    17.4
##  9    18.7
## 10    13.7
## # … with 66 more rows</code></pre>
<p>La instrucción anterior es equivalente a escribir lo siguiente:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb85-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(covid_zmvm,pos_hab)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 1
##    pos_hab
##      &lt;dbl&gt;
##  1    14.4
##  2    17.0
##  3    13.4
##  4    16.2
##  5    17.4
##  6    17.3
##  7    14.9
##  8    17.4
##  9    18.7
## 10    13.7
## # … with 66 more rows</code></pre>
<p>Así, usar el operador tubería permite no sólo ahorrar la escritura de algunos argumentos, sino simplificar la forma en que las instrucciones dadas a R son leídas por un ser humano. Veamos cómo seleccionar ahora, por ejemplo, tres variables: la clave de municipio (<code>cvemun</code>), los casos positivos (<code>pos_hab</code>) y el grado de marginación (<code>gm_2020</code>):</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb87-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(cvemun,pos_hab,gm_2020)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 3
##    cvemun pos_hab gm_2020 
##    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;   
##  1 09010     14.4 Muy Bajo
##  2 09012     17.0 Muy Bajo
##  3 09015     13.4 Muy Bajo
##  4 09017     16.2 Muy Bajo
##  5 09011     17.4 Muy Bajo
##  6 09002     17.3 Muy Bajo
##  7 09003     14.9 Muy Bajo
##  8 09013     17.4 Muy Bajo
##  9 09004     18.7 Muy Bajo
## 10 09016     13.7 Muy Bajo
## # … with 66 more rows</code></pre>
<p>Ahora, imagina que queremos todas las variables excepto el nombre de la Zona Metropolitana, <code>nom_zm</code>. Sería ocioso colocar todos los nombres de las variables menos el citado. Para hacer esto más eficiente es necesario introducir solamente un signo de menos (<code>-</code>) antes del nombre de la variable, para de esta sencilla forma seleccionar todas las variables menos <code>nom_zm</code>.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb89-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>nom_zm)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 55
##    cvemun cve_mun nom_mun     cve_ent nom_ent nom_abr   cvm   ext  pob20 pob20_h
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 09010  010     Álvaro Obr… 09      Ciudad… CDMX     9.01  96.2 759137  361007
##  2 09012  012     Tlalpan     09      Ciudad… CDMX     9.01 310.  699928  334877
##  3 09015  015     Cuauhtémoc  09      Ciudad… CDMX     9.01  32.5 545884  260951
##  4 09017  017     Venustiano… 09      Ciudad… CDMX     9.01  33.9 443704  210118
##  5 09011  011     Tláhuac     09      Ciudad… CDMX     9.01  85.8 392313  190190
##  6 09002  002     Azcapotzal… 09      Ciudad… CDMX     9.01  33.5 432205  204950
##  7 09003  003     Coyoacán    09      Ciudad… CDMX     9.01  53.9 614447  289110
##  8 09013  013     Xochimilco  09      Ciudad… CDMX     9.01 118.  442178  215452
##  9 09004  004     Cuajimalpa… 09      Ciudad… CDMX     9.01  71.2 217686  104149
## 10 09016  016     Miguel Hid… 09      Ciudad… CDMX     9.01  46.4 414470  195467
## # … with 66 more rows, and 45 more variables: pob20_m &lt;dbl&gt;, positivos &lt;dbl&gt;,
## #   defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;, def_hab &lt;dbl&gt;, ss &lt;dbl&gt;,
## #   ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;, ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;,
## #   ocviv &lt;dbl&gt;, occu &lt;dbl&gt;, pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;,
## #   pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;, ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;,
## #   ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;, ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;,
## #   pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, analf &lt;dbl&gt;, sbasc &lt;dbl&gt;, vhac &lt;dbl&gt;, …</code></pre>
<p>En lugar de usar los nombres de las variables, puedes recurrir al número de columna en la que se hallan, contando a partir del 1. Por ejemplo, <code>nom_mun</code> es la columna 3 y <code>pos_hab</code> es la columna 16, entonces podríamos escribir:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb91-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">3</span>,<span class="dv">16</span>)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 2
##    nom_mun               pos_hab
##    &lt;chr&gt;                   &lt;dbl&gt;
##  1 Álvaro Obregón           14.4
##  2 Tlalpan                  17.0
##  3 Cuauhtémoc               13.4
##  4 Venustiano Carranza      16.2
##  5 Tláhuac                  17.4
##  6 Azcapotzalco             17.3
##  7 Coyoacán                 14.9
##  8 Xochimilco               17.4
##  9 Cuajimalpa de Morelos    18.7
## 10 Miguel Hidalgo           13.7
## # … with 66 more rows</code></pre>
<p>Y si es de nuestro interés seleccionar un número consecutivo de columnas, podemos servirnos de:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb93-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 10
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137
##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928
##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884
##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704
##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313
##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205
##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447
##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178
##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686
## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470
## # … with 66 more rows</code></pre>
<hr />
<p><strong>Ejercicio</strong></p>
<p>Para finalizar lo relacionado con la selección, genera una nueva base de datos llamada <code>covid</code> que contenga las siguientes variables: <code>cvemun</code>, <code>nom_mun</code>, <code>cve_ent</code>, <code>nom_ent</code>, <code>ext</code>, <code>pos_hab</code>, <code>def_hab</code>, <code>ocviv</code>, <code>occu</code>, <code>ppob_1</code>, <code>ppob_1dorm</code>, <code>im</code>, <code>gm_2020</code>, <code>grad</code>, <code>poind</code>, <code>pocom</code>, <code>poss</code>, <code>tmind</code>, <code>tmcom</code>, <code>tmss</code>, <code>rmind</code>, <code>rmcom</code>, <code>rmss</code>, <code>den</code>, <code>pob20</code>.</p>
<hr />
</div>
<div id="filtrar-seleccionar-casos" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Filtrar (seleccionar casos)<a href="r-una-introducción-desde-la-exploración-de-información.html#filtrar-seleccionar-casos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Si ahora lo que te interesa es seleccionar filas o casos en lugar de columnas, hay que echar mano de otro “verbo”, es decir, de la función filtrar, <code>filter()</code>. Por ejemplo, imagina que deseamos seleccionar sólo los municipios del Estado de México. Estos municipios cumplen con la condición de que todos ellos tienen el valor “México” en la variable <code>nom_ent</code> (nombre de entidad), o bien, tener el valor “15” en el de <code>cve_ent</code> (clave de entidad). Para poder hacer un uso eficiente de la función de filtrado es necesario introducir también otro tipo de operadores, los llamados operadores lógicos, que aparecen en el cuadro 1.3:</p>
<table>
<caption>Cuadro 1.3</caption>
<thead>
<tr class="header">
<th>Operadores</th>
<th>Definiciones</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>==</td>
<td>igual que</td>
</tr>
<tr class="even">
<td>!=</td>
<td>diferente de</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>menor o igual que</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>mayor o igual que</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>mayor que</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>menor que</td>
</tr>
<tr class="odd">
<td>&amp;</td>
<td>y</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Entonces, para usar la función <code>filter()</code> y tomando como base la información previa:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb95-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cve_ent<span class="sc">==</span><span class="st">&quot;15&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 59 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 15002  002     Acolman      15      México  Mex.    Valle…  9.01  83.9 171507
##  2 15009  009     Amecameca    15      México  Mex.    Valle…  9.01 189.   53441
##  3 15010  010     Apaxco       15      México  Mex.    Valle…  9.01  75.7  31898
##  4 15011  011     Atenco       15      México  Mex.    Valle…  9.01  84.6  75489
##  5 15013  013     Atizapán de… 15      México  Mex.    Valle…  9.01  91.1 523674
##  6 15015  015     Atlautla     15      México  Mex.    Valle…  9.01 162.   31900
##  7 15016  016     Axapusco     15      México  Mex.    Valle…  9.01 231.   29128
##  8 15017  017     Ayapango     15      México  Mex.    Valle…  9.01  36.4  10053
##  9 15020  020     Coacalco de… 15      México  Mex.    Valle…  9.01  35.1 293444
## 10 15022  022     Cocotitlán   15      México  Mex.    Valle…  9.01  15.0  15107
## # … with 49 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#O bien</span></span>
<span id="cb97-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb97-2" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(nom_ent<span class="sc">==</span><span class="st">&quot;México&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 59 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 15002  002     Acolman      15      México  Mex.    Valle…  9.01  83.9 171507
##  2 15009  009     Amecameca    15      México  Mex.    Valle…  9.01 189.   53441
##  3 15010  010     Apaxco       15      México  Mex.    Valle…  9.01  75.7  31898
##  4 15011  011     Atenco       15      México  Mex.    Valle…  9.01  84.6  75489
##  5 15013  013     Atizapán de… 15      México  Mex.    Valle…  9.01  91.1 523674
##  6 15015  015     Atlautla     15      México  Mex.    Valle…  9.01 162.   31900
##  7 15016  016     Axapusco     15      México  Mex.    Valle…  9.01 231.   29128
##  8 15017  017     Ayapango     15      México  Mex.    Valle…  9.01  36.4  10053
##  9 15020  020     Coacalco de… 15      México  Mex.    Valle…  9.01  35.1 293444
## 10 15022  022     Cocotitlán   15      México  Mex.    Valle…  9.01  15.0  15107
## # … with 49 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<p>Para hacer una selección de dos entidades, incluiremos dos expresiones en una misma consulta echando mano del operador lógico “o”, identificado con el signo <code>|</code>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb99-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cve_ent<span class="sc">==</span><span class="st">&quot;09&quot;</span><span class="sc">|</span>cve_ent<span class="sc">==</span><span class="st">&quot;15&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 75 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137
##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928
##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884
##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704
##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313
##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205
##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447
##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178
##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686
## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470
## # … with 65 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<hr />
<p><strong>Ejercicio</strong></p>
<ol style="list-style-type: lower-roman">
<li><p>Selecciona los municipios con una extensión territorial mayor a 84 <span class="math inline">\(km^2\)</span>.<br />
</p></li>
<li><p>Selecciona los municipios con entre 10 y 20 casos positivos por cada mil habitantes.<br />
</p></li>
<li><p>Selecciona los municipios del Estado de México que tengan más de 10 años promedio de estudio y menos de 10 casos positivos por cada mil habitantes.</p></li>
</ol>
<p>¿Qué otros filtros relevantes podrías pensar y elaborar?</p>
<hr />
</div>
<div id="ordenar" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Ordenar<a href="r-una-introducción-desde-la-exploración-de-información.html#ordenar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Una operación útil, cuando se analiza información, tiene que ver con ordenar la base de datos con arreglo al valor de una variable. En R con <code>dplyr</code> de <code>tidyverse</code> esto se hace con la función <code>arrange()</code>, por ejemplo:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb101-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(cvemun)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5
##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5
##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5
##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6
##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5
##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6
##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5
##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5
##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5
## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5
## # … with 66 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<p>El resultado de la función anterior ordena nuestra base de menor a mayor, con base en la clave municipal. Además, es posible incluir varios criterios de ordenación, por ejemplo, si tuvieras los campos año, mes y día podría ordenarse conforme al calendario. En el caso del ejemplo siguiente, primero se ordena con arreglo a la clave de entidad y luego con respecto a la clave municipal y luego por la extensión territorial por cada mil habitantes:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb103-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(cvemun,ext)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5
##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5
##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5
##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6
##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5
##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6
##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5
##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5
##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5
## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5
## # … with 66 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<p>Si deseas ordenar de forma descendente, es decir, de mayor a menor hay que introducir una función adicional, <code>desc()</code>, por ejemplo:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb105-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(cvemun,<span class="fu">desc</span>(ext))</span></code></pre></div>
<pre><code>## # A tibble: 76 × 56
##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5
##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5
##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5
##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6
##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5
##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6
##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5
##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5
##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5
## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5
## # … with 66 more rows, and 46 more variables: pob20_h &lt;dbl&gt;, pob20_m &lt;dbl&gt;,
## #   positivos &lt;dbl&gt;, defuncione &lt;dbl&gt;, pos_mil &lt;dbl&gt;, pos_hab &lt;dbl&gt;,
## #   def_hab &lt;dbl&gt;, ss &lt;dbl&gt;, ppob_sines &lt;dbl&gt;, ppob_basi &lt;dbl&gt;,
## #   ppob_media &lt;dbl&gt;, ppob_sup &lt;dbl&gt;, ocviv &lt;dbl&gt;, occu &lt;dbl&gt;,
## #   pintegra4_ &lt;dbl&gt;, pintegra6_ &lt;dbl&gt;, pintegra8_ &lt;dbl&gt;, ppob_5_o_m &lt;dbl&gt;,
## #   ppob_3_o_m &lt;dbl&gt;, ppob_1 &lt;dbl&gt;, ppob_1dorm &lt;dbl&gt;, ppob_2dorm &lt;dbl&gt;,
## #   ppob_3dorm &lt;dbl&gt;, pviv_ocu5_ &lt;dbl&gt;, pviv_ocu7_ &lt;dbl&gt;, pviv_ocu9_ &lt;dbl&gt;, …</code></pre>
<p>La función anterior primero ordena los municipios con base en la clave de municipio de forma ascendente (de menor a mayor) y simultáneamente coloca de mayor a menor los municipios de acuerdo con su extensión territorial.</p>
<hr />
<p><strong>Ejercicios</strong></p>
<ol style="list-style-type: lower-roman">
<li><p>Genera una nueva base de datos (un nuevo objeto) que contenga sólo las alcaldías de la Ciudad de México y las variables casos por cada mil habitantes, luego ordena esa base de datos con arreglo al número de casos positivos de forma ascendente.</p></li>
<li><p>Has lo mismo que en el inciso anterior, pero para los municipios del Estado de México y las defunciones.</p></li>
</ol>
<hr />
</div>
<div id="crear-nuevas-variables" class="section level3 hasAnchor" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Crear nuevas variables<a href="r-una-introducción-desde-la-exploración-de-información.html#crear-nuevas-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Para añadir una nueva variable a partir de las existentes recurrimos a la función <code>mutate()</code>. Por ejemplo, calculemos la variable densidad de casos positivos, es decir, número de casos positivos dividido entre la extensión territorial, a dicha variable la llamaremos <code>pos_den</code>. Pero antes, generemos una nueva base de datos que sólo contenga algunas de las variables de la base original:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb107-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(cvemun,nom_mun,positivos,pos_hab,ext) <span class="sc">%&gt;%</span></span>
<span id="cb107-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb107-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pos_den=</span>positivos<span class="sc">/</span>ext)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 6
##    cvemun nom_mun               positivos pos_hab   ext pos_den
##    &lt;chr&gt;  &lt;chr&gt;                     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1 09010  Álvaro Obregón            10905    14.4  96.2   113. 
##  2 09012  Tlalpan                   11887    17.0 310.     38.3
##  3 09015  Cuauhtémoc                 7289    13.4  32.5   224. 
##  4 09017  Venustiano Carranza        7172    16.2  33.9   212. 
##  5 09011  Tláhuac                    6812    17.4  85.8    79.4
##  6 09002  Azcapotzalco               7483    17.3  33.5   223. 
##  7 09003  Coyoacán                   9182    14.9  53.9   170. 
##  8 09013  Xochimilco                 7696    17.4 118.     65.1
##  9 09004  Cuajimalpa de Morelos      4071    18.7  71.2    57.2
## 10 09016  Miguel Hidalgo             5669    13.7  46.4   122. 
## # … with 66 more rows</code></pre>
<p>Notarás como la nueva variable aparece al final de la base. Vamos a intentar unir varios de los elementos que hemos aprendido hasta este punto para que veas el potencial de uso de la tubería. Vamos a crear una nueva variable, la misma que hace un momento, luego, tomaremos la base que contiene la nueva variable y construiremos con ella un diagrama de dispersión con la nueva variable y el número de defunciones por cada mil habitantes:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb109-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pos_den=</span>positivos<span class="sc">/</span>ext) <span class="sc">%&gt;%</span> </span>
<span id="cb109-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb109-4"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb109-4" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>pos_den,<span class="at">y=</span>def_hab))<span class="sc">+</span></span>
<span id="cb109-5"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb109-5" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>pos_den,<span class="at">y=</span>def_hab))<span class="sc">+</span></span>
<span id="cb109-6"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb109-6" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Densidad de casos positivos&quot;</span>,<span class="at">y=</span><span class="st">&quot;Defunciones por cada mil habitantes&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>¿Cómo explicarías la relación entre la variable creada, densidad de casos positivos, y las defunciones por cada mil habitables?</p>
<hr />
<p><strong>Ejercicio</strong></p>
<ol style="list-style-type: lower-roman">
<li><p>¿Cómo añadirías más de una nueva variable a tu base original?</p></li>
<li><p>Construye la variable “densidad de defunciones” y grafícala en un diagrama de dispersión con la densidad de población? Usa las cañerías.</p></li>
</ol>
<hr />
<p>Quizá lo que te interese sea sólo quedarte con algunas de las variables originales y las nuevas variables creadas a partir de la información de la variable original. Para ello es útil la función <code>transmute()</code>:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb110-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">transmute</span>(cvemun,nom_mun,pos_hab,def_hab,<span class="at">pos_den=</span>positivos<span class="sc">/</span>ext,<span class="at">def_den=</span>defuncione<span class="sc">/</span>ext)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 6
##    cvemun nom_mun               pos_hab def_hab pos_den def_den
##    &lt;chr&gt;  &lt;chr&gt;                   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 09010  Álvaro Obregón           14.4   1.14    113.     9.03
##  2 09012  Tlalpan                  17.0   0.774    38.3    1.75
##  3 09015  Cuauhtémoc               13.4   1.38    224.    23.2 
##  4 09017  Venustiano Carranza      16.2   1.32    212.    17.3 
##  5 09011  Tláhuac                  17.4   0.737    79.4    3.37
##  6 09002  Azcapotzalco             17.3   1.65    223.    21.3 
##  7 09003  Coyoacán                 14.9   1.05    170.    12.0 
##  8 09013  Xochimilco               17.4   0.898    65.1    3.36
##  9 09004  Cuajimalpa de Morelos    18.7   0.873    57.2    2.67
## 10 09016  Miguel Hidalgo           13.7   0.943   122.     8.43
## # … with 66 more rows</code></pre>
<p>El segmento de código anterior genera una nueva base en la que sólo conservamos algunas de las variables originales y añadimos dos nuevas a partir de la información original.</p>
</div>
<div id="resúmenes-de-información-y-grupos" class="section level3 hasAnchor" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Resúmenes de información y grupos<a href="r-una-introducción-desde-la-exploración-de-información.html#resúmenes-de-información-y-grupos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Quizá una de las funciones más potentes y sencillas que tiene <code>dplyr</code> es la función de resumen (<code>summarise()</code>). Veamos cómo opera. Imagina que deseas un promedio del número de casos que terminaron en muerte:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb112-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span></span>
<span id="cb112-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">promedio_def=</span><span class="fu">mean</span>(def_hab, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   promedio_def
##          &lt;dbl&gt;
## 1        0.683</code></pre>
<p>Esto no es particularmente útil si se le compara con la función del paquete base de R, <code>summary()</code>, pero si la combinamos con la función de agrupamiento, <code>group_by()</code> la situación cambia. Imagina que queremos el promedio de casos positivos por cada mil habitantes para cada conjunto de municipios de las tres entidades que componen el Valle de México:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb114-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span></span>
<span id="cb114-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(cve_ent) <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">promedio_def=</span><span class="fu">mean</span>(def_hab, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">promedio_pos=</span><span class="fu">mean</span>(pos_hab))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   cve_ent promedio_def promedio_pos
##   &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt;
## 1 09             1.08         15.8 
## 2 13             0.790         5.88
## 3 15             0.572         4.57</code></pre>
<p>El en segmento de código anterior primero se agrupa la información con arreglo al criterio de clave de entidad, <code>cve_ent</code>, y luego, para cada grupo, calcula el resultado especificado: un promedio. Dentro de la función de resumen, <code>summarise()</code>, se puede llevar a cabo no sólo múltiples operaciones sino que estas pueden ser de diferente naturaleza, incluso por ejemplo una suma o una cuenta:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb116-1" aria-hidden="true" tabindex="-1"></a>covid_zmvm <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(cve_ent) <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="r-una-introducción-desde-la-exploración-de-información.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">pob_tot=</span><span class="fu">sum</span>(pob20),<span class="at">im_medio=</span><span class="fu">mean</span>(im),<span class="at">tot_mun=</span><span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   cve_ent  pob_tot im_medio tot_mun
##   &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt;   &lt;int&gt;
## 1 09       9209944     60.1      16
## 2 13        168302     59.4       1
## 3 15      12426269     58.0      59</code></pre>
<p>En el segmento de código anterior creamos tres variables de resumen: la población total, <code>pob_tot</code>, que es la suma de la población para cada entidad, el promedio del índice de marginación, <code>im_medio</code> y el número de municipios de cada entidad a través de una cuenta con la función <code>n()</code>.</p>
<hr />
<p><strong>Ejercicio</strong></p>
<ol style="list-style-type: lower-roman">
<li><p>Construye una gráfica de barras donde aparezca el total de población para cada entidad, a partir del segmento código anterior.</p></li>
<li><p>¿Es posible agrupar la información con arreglo a otra variable? Construye algunas medidas de resumen con esos grupos y gráficalos.</p></li>
</ol>
<hr />
<p>Estas y otras tantas funciones son desarrolladas con todo detalle y de forma muy amena en el citado libro de Wickham y Grolemund, <a href="https://r4ds.had.co.nz/">R for data science</a>, por lo que su estudio se recomienda ampliamente.</p>
<p>En el siguiente capítulo continuamos con la exploración de la información, pero de un tipo particular de información: la información espacial.</p>
<div/>


</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Wickham2016" class="csl-entry">
Wickham, Hadley, and Garrett Grolemund. 2016. <em>R for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. <em>O’Rielly</em>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="prólogo.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mapas-coropléticos-en-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
